{"visual":{"name":"scatterMatrix","displayName":"ScatterMatrix","guid":"scatterplotMatrixAC8E02B779444208B0686C0E96FCEC95","visualClassName":"Visual","version":"1.0.0","description":"Builds scatterplot matrix","supportUrl":"lukastaylor.com","gitHubUrl":"https://github.com/lukastay/Lukas-Taylor-Repository/blob/main/README.md"},"author":{"name":"Lukas Taylor","email":"lukastay@umich.edu"},"apiVersion":"5.1.0","style":"style/visual.less","stringResources":{},"capabilities":{"dataRoles":[{"displayName":"Quanitative Vairbales","kind":"Measure","name":"Values"}],"dataViewMappings":[{"conditions":[{"Values":{"min":2,"max":7}}],"scriptResult":{"dataInput":{"table":{"rows":{"select":[{"for":{"in":"Values"}}],"dataReductionAlgorithm":{"top":{}}}}},"script":{"scriptProviderDefault":"R","scriptOutputType":"png","source":{"objectName":"rcv_script","propertyName":"source"},"provider":{"objectName":"rcv_script","propertyName":"provider"},"scriptSourceDefault":"ERRORCHECK = FALSE\n\noptions(warn=0)\n\nlibrary(ggplot2);\nlibrary(GGally);\n\nfor (i in colnames(Values)){\n  Values[[i]] <- unlist(Values[[i]])\n}\n\np <- ggpairs(Values, upper = list(continuous = \"density\", combo = \"facetbar\"))\n\nf <- sapply(Values, is.factor)\n\n\nmiddle <- p$ncol/2\nmiddleround <- ceiling(middle)\neven <- FALSE\n\nif (middle == middleround) {\n  even <- TRUE\n}\n\n\nwhereami <- function(i, j, ifprint) {\n  #TESTING WHERE WE ARE IN THE GRAPH\n  \n  axis = FALSE\n  TOP = FALSE\n  BOTTOM = FALSE\n  \n  if (even==TRUE) {\n    \n    if (i==j){\n      \n      axis = TRUE\n      \n    } else if (j>i) {\n      \n      TOP = TRUE\n      \n      \n    } else if (i>j) {\n      \n      BOTTOM = TRUE\n      \n    } else {\n      \n      #ERROR\n      print(\"You shoulnd't see this. EVEN = TRUE\")\n      \n    }\n    \n  }  else if (even==FALSE) {\n    \n    if (i==j){\n      \n      axis = TRUE\n      \n    } else if (j>i) {\n      \n      TOP = TRUE\n      \n      \n    } else if (i>j) {\n      \n      BOTTOM = TRUE\n      \n    } else {\n      \n      #ERROR\n      print(\"You shoulnd't see this. EVEN = FALSE\")\n      \n    }\n  } else {\n    \n    print(\"You shuound't see this. Even is neither TRUE not FALSE\")\n    \n  }\n  \n  if (ifprint == TRUE){\n    print(\"----\")\n    print(\"axis\")\n    print(axis)\n    print(\"top\")\n    print(TOP)\n    print(\"bottom\")\n    print(BOTTOM)\n    print(\"row\")\n    print(i)\n    print(\"column\")\n    print(j)\n    \n    rowname <- colnames(Values)[i]\n    colname <- colnames(Values)[j]\n    \n    print(\"rowname\")\n    print(rowname)\n    print(\"colname\")\n    print(colname)\n    \n  }\n  \n  returnlist <- list(\"bottom\" = BOTTOM, \"top\" = TOP, \"axis\" = axis)\n  \n  return(returnlist)\n  \n}\n\nfor(i in 1:p$nrow) {\n  for(j in 1:p$ncol){\n    \n    wheream <- whereami(i,j, FALSE)\n    \n    BOTTOM <- wheream$bottom\n    TOP <- wheream$top\n    axis <- wheream$axis\n    \n    if (i==j) {\n      #AXIS\n      \n      p[i,j] <- p[i,j] + geom_density(color = 'cornflowerblue', alpha = 0.5, aes(fill = 'cornflowerblue')) + scale_fill_manual(values=\"cornflowerblue\")\n      \n    } else if (!(f[i])&!(f[j])) {\n      #BOTH CONTINUOUS\n      \n      # ABOVE AXIS, NO CHANGE. BELOW AXIS, ADD GEOM POINT AND COLOUR MANUAL\n      \n      if (BOTTOM == TRUE) {\n        \n        p[i,j] <- p[i,j] + geom_point(aes(colour = \"cornflowerblue\")) + \n          scale_colour_manual(values = \"cornflowerblue\")\n        \n      } else if (TOP == TRUE) {\n        \n        # DO NOTHING\n        \n      } else {\n        \n        print(\"You shouldn't see this. Both are continuous, neither bottom nor top is true\")\n        \n      }\n      \n    } else if ((!(f[i])&(f[j]))) {\n      #ROW CONTINUOUS, COLUMN DISCRETE\n\n      p[i,j] <- p[i,j] + scale_fill_manual(values=\"cornflowerblue\")\n      \n      if (BOTTOM == TRUE) {\n        \n        # DO NOTHING\n        \n      } else if (TOP == TRUE) {\n        \n        # Discrete-continuous top. Still working on this.\n        \n      } else {\n        \n        print(\"You shouldn't see this. Row is continuous, column discrete, neither bottom nor top is true\")\n        \n      }\n      \n    } else if ((f[i])&!(f[j])) {\n      #ROW DISCRETE, COLUMN CONTINUOUS\n\n      p[i,j] <- p[i,j] + scale_fill_manual(values=\"cornflowerblue\")\n      \n      if (BOTTOM == TRUE) {\n        \n        # DO NOTHING\n        \n      } else if (TOP == TRUE) {\n        \n        # Discrete-continuous top. Still working on this.\n        \n      } else {\n        \n        print(\"You shouldn't see this. Row is discrete, column continuous, neither bottom nor top is true\")\n        \n      }\n      \n    } else if ((f[i])&(f[j])) {\n      #BOTH DISCRETE\n\n      p[i,j] <- p[i,j] + scale_fill_manual(values=\"cornflowerblue\")\n      \n      if (BOTTOM == TRUE) {\n        \n        # DO NOTHING\n        \n      } else if (TOP == TRUE) {\n        \n        # DO NOTHING\n        \n      } else {\n        \n        print(\"You shouldn't see this. Both discrete, neither bottom nor top is true\")\n        \n      }\n      \n    }  else {\n      #ERROR HANDLING\n      \n      print(\"You shouln't see this message. \")\n      \n    }\n    \n  }\n}\n\nerrorchecker <- function(nothing){\n    \n  #ERROR CHECKER\n  \n  print(\"BEGINNING ERROR CHECKING\")\n  \n  for(i in 1:p$nrow) {\n    for(j in 1:p$ncol){\n      tryCatch(\n        expr = {\n          print(p[i,j])\n        },\n        error = function(e){\n          print(\"ERROR AT:\")\n          wheream <- whereami(i,j, TRUE)\n        }\n      )\n    }\n  }\n  \n  print(\"DONE ERROR CHECKING\")\n  \n}\n\nif (ERRORCHECK == TRUE){\nerrorchecker()\n}\n\np"}}}],"objects":{"rcv_script":{"properties":{"provider":{"type":{"text":true}},"source":{"type":{"scripting":{"source":true}}}}}},"suppressDefaultTitle":true,"privileges":[]},"dependencies":{"cranPackages":[{"name":"ggplot2","displayName":"GG Plot 2","url":"https://cran.r-project.org/web/packages/ggplot2/index.html"},{"name":"GGally","displayName":"GGally","url":"https://cran.r-project.org/web/packages/ggally/index.html"}]},"content":{"js":"var scatterplotMatrixAC8E02B779444208B0686C0E96FCEC95;(()=>{\"use strict\";var e={402:(e,t,i)=>{i.d(t,{E:()=>n});var a=i(84),s=a.Zb,r=a.Hn;class l extends s{constructor(){super(...arguments),this.provider=void 0,this.source=void 0,this.name=\"rcv_script\",this.displayName=\"rcv_script\",this.slices=[this.provider,this.source]}}class n extends r{constructor(){super(...arguments),this.rcvScriptCard=new l,this.cards=[this.rcvScriptCard]}}},324:(e,t,i)=>{i.d(t,{u:()=>r});var a=i(261),s=i(402);class r{constructor(e){this.formattingSettingsService=new a.Z,this.imageDiv=document.createElement(\"div\"),this.imageDiv.className=\"rcv_autoScaleImageContainer\",this.imageElement=document.createElement(\"img\"),this.imageElement.className=\"rcv_autoScaleImage\",this.imageDiv.appendChild(this.imageElement),e.element.appendChild(this.imageDiv)}update(e){if(!(e&&e.type&&e.viewport&&e.dataViews&&0!==e.dataViews.length&&e.dataViews[0]))return;const t=e.dataViews[0];this.formattingSettings=this.formattingSettingsService.populateFormattingSettingsModel(s.E,e.dataViews);let i=null;t.scriptResult&&t.scriptResult.payloadBase64&&(i=\"data:image/png;base64,\"+t.scriptResult.payloadBase64),this.imageElement.src=i||null,this.onResizing(e.viewport)}onResizing(e){this.imageDiv.style.height=e.height+\"px\",this.imageDiv.style.width=e.width+\"px\",this.imageElement.style.height=e.height+\"px\",this.imageElement.style.width=e.width+\"px\"}getFormattingModel(){return this.formattingSettingsService.buildFormattingModel(this.formattingSettings)}}},84:(e,t,i)=>{i.d(t,{Hn:()=>s,Zb:()=>r});class a{}class s{}class r extends a{getFormattingCard(e,t,i){return{displayName:i&&this.displayNameKey?i.getDisplayName(this.displayNameKey):this.displayName,description:i&&this.descriptionKey?i.getDisplayName(this.descriptionKey):this.description,groups:[t],uid:e,analyticsPane:this.analyticsPane}}}},261:(e,t,i)=>{i.d(t,{Z:()=>a});const a=class{constructor(e){this.localizationManager=e}populateFormattingSettingsModel(e,t){var i,a,s;let r=new e,l=null===(a=null===(i=null==t?void 0:t[0])||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.objects;return l&&(null===(s=r.cards)||void 0===s||s.forEach((e=>{var t,i,a;null===(t=null==e?void 0:e.slices)||void 0===t||t.forEach((t=>{null==t||t.setPropertiesValues(l,e.name)})),null===(a=null===(i=null==e?void 0:e.container)||void 0===i?void 0:i.containerItems)||void 0===a||a.forEach((t=>{var i;null===(i=null==t?void 0:t.slices)||void 0===i||i.forEach((t=>{null==t||t.setPropertiesValues(l,e.name)}))}))}))),r}buildFormattingModel(e){var t;let i={cards:[]};return null===(t=e.cards)||void 0===t||t.forEach((e=>{if(!e)return;const t=e.name,a=e.name+\"-group\";let s={displayName:void 0,slices:[],uid:a},r=e.getFormattingCard(t,s,this.localizationManager);i.cards.push(r);const l={};if(e.container){const i=e.container,n=a+\"-container\",o={displayName:this.localizationManager&&i.displayNameKey?this.localizationManager.getDisplayName(i.displayNameKey):i.displayName,description:this.localizationManager&&i.descriptionKey?this.localizationManager.getDisplayName(i.descriptionKey):i.description,containerItems:[],uid:n};i.containerItems.forEach((e=>{const i=e.displayNameKey?e.displayNameKey:e.displayName,a=n+i;let s={displayName:this.localizationManager&&e.displayNameKey?this.localizationManager.getDisplayName(e.displayNameKey):e.displayName,slices:[],uid:a};this.buildFormattingSlices(e.slices,t,l,r,s.slices),o.containerItems.push(s)})),s.container=o}e.slices&&this.buildFormattingSlices(e.slices,t,l,r,s.slices),r.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(e)})),i}buildFormattingSlices(e,t,i,a,s){null==e||e.forEach((e=>{let r=null==e?void 0:e.getFormattingSlice(t,this.localizationManager);r&&(void 0===i[e.name]?i[e.name]=0:(i[e.name]++,r.uid=`${r.uid}-${i[e.name]}`),e.topLevelToggle?(r.suppressDisplayName=!0,a.topLevelToggle=r):s.push(r))}))}getRevertToDefaultDescriptor(e){var t,i;const a={};let s=[],r=this.getSlicesRevertToDefaultDescriptor(e.name,e.slices,a),l=[];return null===(i=null===(t=e.container)||void 0===t?void 0:t.containerItems)||void 0===i||i.forEach((t=>{l=l.concat(this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,a))})),s=r.concat(l),s}getSlicesRevertToDefaultDescriptor(e,t,i){let a=[];return null==t||t.forEach((t=>{t&&!i[t.name]&&(i[t.name]=!0,a=a.concat(t.getRevertToDefaultDescriptor(e)))})),a}}},738:e=>{e.exports=Function(\"return this\")()}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var a={};(()=>{i.r(a),i.d(a,{default:()=>r});var e=i(324),t=i(738).powerbi,s={name:\"scatterplotMatrixAC8E02B779444208B0686C0E96FCEC95\",displayName:\"ScatterMatrix\",class:\"Visual\",apiVersion:\"5.1.0\",create:t=>{if(e.u)return new e.u(t);throw\"Visual instance not found\"},createModalDialog:(e,t,i)=>{const a=globalThis.dialogRegistry;e in a&&new a[e](t,i)},custom:!0};void 0!==t&&(t.visuals=t.visuals||{},t.visuals.plugins=t.visuals.plugins||{},t.visuals.plugins.scatterplotMatrixAC8E02B779444208B0686C0E96FCEC95=s);const r=s})(),scatterplotMatrixAC8E02B779444208B0686C0E96FCEC95=a})();","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NEY1QjA1NUQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NEY1QjA1NEQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Mjk5RDU1ODBGRDRFMDExQTcxQ0JFODI3ODBCQUE5RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpDoNX0AAAI3SURBVHjarJRLSFVRFIY9t7SiRDGLoEEPCRJRaCSYkxCiFCXCF+LIMExQLkilgumgwkbdBuWDRC2EomhURCOjgagkXEgKLUKhidobM6H0+i34rxyPnuvEA5/rXPda/1l7739vJxKJxG3ls93+hEKhTILxJhgMftmsiPxdhHw4CfepeR8dCyjWwwB0kZy3iVgCoQ2ewnmXxhrBD7Cgr/ZQVA17fDRPw2UYhzK6G99IsBse6/0QNME+H8FT4EA/YiPqOgA1q4IMzBNuw6iKjkCpj+Av+AdnEEmD3bxfhzvuDk30HaEaLsEkXCO53rN+Bwg5qsvTuj/TjGYtx9nINhRmEx7AYWiFW7AXOuEcbPOUvIZ2mnrl+PkQUbNEh4QHNKUSDdsSBWEOlmxTEfvs26FL9Khe211if6Acgee+xo7xzMgBxfq9qPe3fgWBGN2lEnqtG9nExM7CV3jp3bDos2bKJB0nHFRxAxRpA/5CIXyHh5ABv6GZqd9dJ6iz2SjbxMMypGhJFtTlNzu3kK7xgDxpove8U66FK2A+s6nul5gVVMEL+Ak7lG/T+g9JcIOGar2CRUoogxMwpP/bLTJMB9bRhDbkk5bBUU0y3ES0xS04CBfN9RSHiY90vJK0BHaSzG9h2eejS3RJeVfdtrGzuGyd8CX7Yq6ExuCH63jaVMPkFOv6OibB6DKs2+VEQp+WYBoqERn2sVWWRNN0YurIfeL14U6YkpkLYCSG6e0yqdCxvKBLIm5FgAEAV0nKuwMYRUsAAAAASUVORK5CYII="},"visualEntryPoint":""}